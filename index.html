<html>
    <head>
        <link rel="preload" href = "data/2014-thermalPP-data.csv" as="fetch">
        
        <link rel="stylesheet" href="index.css">
    </head>
    <body>
        <svg width="0" height="0">
            <linearGradient id="Rates-gradient" gradientUnits="userSpaceOnUse" x1="0" x2="0"> 
                <stop></stop>
                <stop></stop>
                <stop></stop>
            </linearGradient>
        </svg>
        <article>
            <header>
                <h1 class="text center"><span class="color-main text">Power Plants</span></h1>
                <nav>
                    <a href="#Intro">Intro</a>
                    <a href="#Placeholder2">Placeholder 2</a>
                    <a href="#Placeholder3">Placeholder 3</a>
                    <a href="#Comparison">Comparison</a>
                    <a href="#Placeholder5">Placeholder 5</a>
                </nav>
            </header>
            <section id="Intro"> 
                <h2 class="text start">Why do we care about economic state and crime?</h2>
				<div class="flex horizontal">
					<div>
						<h3>The US economy recently experienced a recession and recovery</h3>
						<p>According to the National Bureau of Economic Research, the US economy fell into the most recent recession in 2007, which ended in 2009.  There were massive increases in unemployment and decreases in consumer spending.</p>
						<h3>Crime rates are related to the economy</h3>
						<p>Studies as far back as the <a href="http://www.annualreviews.org/doi/abs/10.1146/annurev.so.10.080184.000523" target="_blank" rel="noopener">1970s and 80s</a> have shown that there is a relationship between the state of the economy and the occurence of crimes.  Since this time, there have been many <a href="https://link.springer.com/article/10.1007/s10940-011-9139-5" target="_blank" rel="noopener">scientific studies</a> investigating this complex relationship.</p>
						<h3>Explore this relationship in Los Angeles county</h3>
						<p>The relationship between crime and the economy is not linear across the nation, states, or cities.  Using the tools below, learn about crime in LA County between 2010, immediately following the recession, and 2015, after the economy had recovered.  Explore crimes reported to the LA Police Department (LAPD) and compare crime rates in different areas of the county.  Run the crime simulator to simulate crimes in your reporting area and examine heatmaps of crime density.</p>
					</div>
					<div>
						<figure>
							<!-- <img src="https://cdn.pixabay.com/photo/2017/06/17/11/39/power-plant-2411932_1280.jpg"> 
							<figcaption class="text end">Credit ABC News</figcaption> -->
						</figure>
					</div>
				</div>
            </section>
            <section id="Types">
                <h2 class="text end">Explore different types of power plants</h2>
                <div class="flex horizontal">
                    <div>
                        <figure>
                            <svg class="tree"></svg>
                            <figcaption class="text start">Power Plant Fuel</figcaption>
                        </figure>
                    </div>
                </div>
            </section>
            <section id="Comparison"> <!-- Placeholder text to test heatmap -->
				<h2>Compare dogs between districts</h2>
				<div class="flex">
					<p>Compare the density of reported crimes between districts with the heatmaps below.  Compare the top five crimes reported in each district as you explore the crime density.  Select different districts or compare across 2015 and 2010 by selecting options from the drop down menus.</p>
				</div>
				<div class="flex horizontal">
					<figure class="heat"></figure>
				</div>
            </section>
        </article>
        <script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>
        <script src="//d3js.org/topojson.v1.min.js"></script>
        <script>
            var width = 960,
                height = 500;

            var path = d3.geo.path().projection(null);

            var zoom = d3.behavior.zoom()
                .translate([0, 0])
                .scale(1)
                .scaleExtent([1, 8])
                .on("zoom", zoomed);

            var svg = d3.select("body").append("svg")
                .attr("width", width)
                .attr("height", height);

            var features = svg.append("g");

            svg.append("rect")
                .attr("class", "overlay")
                .attr("width", width)
                .attr("height", height)
                .call(zoom);

            d3.json("us.json", function(error, us) {
                if (error) throw error;

                features.append("path")
                    .datum(topojson.feature(us, us.objects.states))
                    .attr("class", "state")
                    .attr("d", path);

                features.append("path")
                    .datum(topojson.mesh(us, us.objects.states, function(a, b) { return a !== b; }))
                    .attr("class", "state-border")
                    .attr("d", path)
                    .style("stroke-width", "1.5px");

                features.append("path")
                    .datum(topojson.mesh(us, us.objects.counties, function (a, b) { return a !== b; }))
                    .attr("class", "county-border")
                    .attr("d", path)
                    .style("stroke-width", ".5px");
            });

            function zoomed() {
                features.attr("transform", "translate(" + d3.event.translate + ")scale(" + d3.event.scale + ")");
                features.select(".state-border").style("stroke-width", 1.5 / d3.event.scale + "px");
                features.select(".county-border").style("stroke-width", .5 / d3.event.scale + "px");

                d3.select(self.frameElement).style("height", height + "px");
            }
        </script>
        <script src="https://d3js.org/d3.v4.min.js"></script>
        <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCOOO14atqcvUZUURkaNP-w7PbevEmrAsI"></script>
		<script src="external/heatmap.min.js"></script>
		<script src="external/gmaps-heatmaps.js"></script>
        <script src="index.js" type="module"></script>
    </body>
</html>